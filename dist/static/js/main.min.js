'use strict';

svg4everybody(); // ///////////////////////////////////// polifill inicialize

objectFitImages(); // ///////////////////////////////////// plagin icialize

var lazyLoadInstance = new LazyLoad({
  elements_selector: ".lazy"
}); // ///////////////////////////////////// block

$('[data-m-btn="open"]').on('click', function () {
  openMobMenu();
});
$('[data-m-btn="close"]').on('click', function () {
  closeMobMenu();
});
$('[data-nav="main-m-nav"]').on('click', function () {
  closeMobMenu();
});
$('[data-nav="m-nav-inner"]').click(function (event) {
  event.stopPropagation();
});
$(window).resize(function () {
  if ($('.header__box-m-btn').is(':hidden')) {
    closeMobMenu();
  }
});

function openMobMenu() {
  $('[data-nav="main-m-nav"]').addClass('_open');
  $('body').css({
    "overflow-y": "hidden"
  });
}

function closeMobMenu() {
  $('[data-nav="main-m-nav"]').removeClass('_open');
  $('body').css({
    "overflow-y": "auto"
  });
  $('[data-nav="sub-m-nav"]').slideUp();
  $('[data-btn="open-m-sub-nav"]').removeClass('_active');
}

$('[data-btn="open-m-sub-nav"]').on('click', function () {
  $(this).toggleClass('_active');
  $('[data-nav="sub-m-nav"]').slideToggle();
});
$('[data-btn="open-search"]').on('click', function () {
  if ($('[data-js="main-search"]').is(':hidden')) {
    if ($('[data-nav="main"]').is(':hidden')) {
      $('[data-js="main-search"]').show();
    } else {
      $('[data-js="main-search"]').slideDown(150);
    }

    $('[data-js="main-search-input"]').focus();
  } else {
    $('[data-js="main-search"]').slideUp(150);
  }
});
$('[data-btn="search-close"]').on('click', function () {
  $('[data-js="main-search"]').hide();
});
$('body').mouseup(function (even) {
  if ($('[data-js="main-search"]').has(even.target).length === 0) {
    $('[data-js="main-search"]').slideUp(150);
  }
});
tdTabs('[data-tab-btn]', '[data-tab-content]');

function tdTabs(btn, content) {
  var tabBtns = $(btn);
  var tabContens = $(content);
  tabBtns.first().addClass('_active');
  tabContens.hide();
  tabContens.first().fadeIn();
  tabBtns.on('click', function () {
    tabBtns.removeClass('_active');
    $(this).addClass('_active');
    tabContens.hide();
    tabContens.eq($(this).attr('data-tab-btn')).fadeIn();
  });
} // /////////////////////////////////////////////// data-slider="0"


$(window).resize(function () {
  startSlider0();
});
startSlider0();

function startSlider0() {
  if ($('.agitation__slider.d-none').is(':hidden')) {
    $('[data-slide="0"]').slick({
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: false,
      autoplay: true,
      autoplaySpeed: 6000,
      speed: 1000,
      swipe: false,
      infinite: true,
      accessibility: false,
      fade: true
    });
    $('[data-slide="0"]').on('lazyLoaded', function (event, slick, currentSlide, nextSlide) {
      objectFitImages();
    });
  }
} //////////////////////////////////////////// data-slider="1"


$('[data-slider="1"]').slick({
  slidesToShow: 3,
  slidesToScroll: 1,
  arrows: false,
  dots: true,
  infinite: true,
  accessibility: false,
  touchThreshold: 10,
  swipeToSlide: true,
  responsive: [{
    breakpoint: 1200,
    settings: {
      variableWidth: true
    }
  }, {
    breakpoint: 576,
    settings: {
      variableWidth: false,
      slidesToShow: 1,
      slidesToScroll: 1,
      infinite: false
    }
  }]
});
$('[data-slider="1"] button').text(''); //////////////////////////////////////////// data-slider="1"

$('[data-slider="2"]').slick({
  slidesToShow: 6,
  // slidesToScroll: 1,
  arrows: false,
  // infinite: false,
  dots: true,
  accessibility: false,
  touchThreshold: 20,
  swipeToSlide: true,
  responsive: [{
    breakpoint: 1200,
    settings: {
      variableWidth: true
    }
  }, {
    breakpoint: 576,
    settings: {
      variableWidth: false,
      slidesToShow: 2,
      slidesToScroll: 2,
      infinite: false,
      swipeToSlide: false
    }
  }]
}); // $('[data-slider="1"] button').text('');

$('.btn-modal').magnificPopup({
  type: 'inline',
  showCloseBtn: false,
  callbacks: {
    open: function open() {
      $('.modal__btn-close').on('click', function () {
        $.magnificPopup.close();
      });
    }
  }
});
$('[data-btn="show-password"]').on('click', function () {
  if ($(this).prev().attr("type") === 'password') {
    $(this).prev().attr({
      "type": "text"
    });
    $(this).addClass('_active');
  } else {
    $(this).prev().attr({
      "type": "password"
    });
    $(this).removeClass('_active');
  }
});
$(window).scroll(function () {
  if ($(this).scrollTop() > 1500) {
    // $('.up').fadeIn();
    $('.up').css({
      "transform": "translateX(0)"
    });
  } else {
    $('.up').css({
      "transform": "translateX(100px)"
    });
  }
});
$('.up').on('click', function () {
  $('body,html').animate({
    scrollTop: 0
  }, 500);
});
var copyCodeButton = document.querySelector('[data-btn="copy"]');

if (copyCodeButton) {
  var onCopyCodeButtonClick = function onCopyCodeButtonClick(evt) {
    evt.preventDefault(); // evt.target.classList.add('button--copy--success');

    evt.target.textContent = 'Copied';
    var range = document.createRange();
    range.selectNode(document.querySelector('[data-value="code"]'));
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    document.execCommand('copy');
    window.getSelection().removeAllRanges();
  };

  copyCodeButton.addEventListener('click', onCopyCodeButtonClick);
}

; // ///////////////////////////////////// ather
// remove focus from all button
// $('button	').on('click', function() {
// 	$(this).blur();
// });
// change option color

$('.form-control._placeholder').on('change', function () {
  var color = $(this).find('option').css('color');
  $(this).css('color', color);
}); // add margin bottom all-vendors__wrap-link

$('.all-vendors__letter').prev(".all-vendors__wrap-link").css({
  "margin-bottom": "23px"
}); // modal accordion

$('.mod-need-help__list').on('click', '.mod-need-help__btn', function () {
  $(this).next().slideToggle();
}); // ///////////////////////////////////////////////////// stick footer

(function () {
  var isIE11 = !!window.MSInputMethodContext && !!document.documentMode;

  var stickFooter = function stickFooter() {
    var FOOTER = document.querySelector('footer');
    var MAIN = document.querySelector('main');
    var BODY = document.querySelector('body');
    var footerHeight = FOOTER.offsetHeight;
    BODY.style.position = 'relative';
    MAIN.style.marginBottom = footerHeight + 'px';
    FOOTER.style.position = 'absolute';
    FOOTER.style.bottom = '0';
    FOOTER.style.left = '0';
    FOOTER.style.width = '100%';
  };

  if (isIE11) {
    stickFooter();
    window.addEventListener('resize', stickFooter);
  }

  ;
})();